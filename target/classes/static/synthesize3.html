<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>物联网-综合信息-视频信息</title>
  <link rel="stylesheet" href="css/reset.min.css">
  <link rel="stylesheet" href="css/zTreeStyle/zTreeStyle.css">
  <link rel="stylesheet" href="css/style.css">

</head>

<body>
  <div class="mx-main">
    <div class="mx-handle clearfix">
      
      <div class="sblb fl">
        <h3>设备列表</h3>
        <div class="tree-cnt">
          <div class="tree-show">
            <ul id="synthesize3_tree" class="ztree"></ul>
          </div>
        </div>
      </div>
      
      <div class="sm-title fl">
        视频信息
      </div>
      
      <a href="" class="btn btn-default fr" onclick="showMainContent('jsdgl.html');return false;">
       监视点管理
      </a>
      
      <div class="sm-userInfo fr">
        [21号] 李娜 土豆
      </div>
    </div>
    
    <div class="spxx-module mt10">
      <div class="zhxx-video-cnt" id="synthesize3_video">
        <img src="images/video2.png" alt="">
      </div>
    </div>
  </div>


  

  

  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.bgiframe-2.1.2.js"></script>
  <script src="js/layer/layer.js"></script>
  <script src="js/slide.js"></script>
  <script src="js/jquery.ztree.all.min.js"></script>
  <script src="js/common.js"></script>
  <script src="js/purl.js"></script>
  <script src="js/api.js"></script>
  <script src="js/ui.js"></script>

  <script>

      var lastSelectNode;
      var treeEl=$('#synthesize3_tree');
      var onNodeSelect = function (node) {
          maxNodeId = 0;
          if (node && lastSelectNode && lastSelectNode === node) return;
          if (!node) node = lastSelectNode;
          if (node && node.oriData && node.oriData['tp_type'] === 3) {
              if (node.children.length) {
                  //onNodeSelect(node.children[0]);
                  $('#synthesize3_tree').data('z-tree').selectNode(node.children[0]);
                  onNodeSelect(node.children[0]);
                  return;
              }
          } else if (node && node.oriData && node.oriData['tp_type'] === 4) {

              lastSelectNode = node;
              treeEl.parents('.tree-cnt').hide();
              //监控点
              var name = node.oriData['tp_name'];
              var id = node.oriData['tp_id'];
              var deviceId = node.oriData['deviceId'];
              var parentNode = node.getParentNode();
              if (parentNode && parentNode.oriData) {
                  name = parentNode.oriData['tp_name'] + ' ' + name;
              }
              $('.sm-userInfo').text(name);
              UI.showCamera(deviceId, '#synthesize3_video');
          }
      };
      UI.renderPointTree("#synthesize3_tree", onNodeSelect);
      $("#synthesize3_tree").on('z-tree-load', function () {
          UI.findFirstDeviceOnTree($(this).data('z-tree'), 3, onNodeSelect);
      });
    var deviceProj = $('#big_data_analysis_device_proj');
    var deviceFrom = $('#big_data_analysis_device_from');
    var deviceTo = $('#big_data_analysis_device_to');
    $(".sblb>h3").click(function() {
        var ctEl = $(this).next().toggle();
    });
  </script>

</body>

</html>